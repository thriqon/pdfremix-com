!function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var e=t(function(t){window.Slip=function(){var e={ariaRole:"listbox",tabIndex:0,focus:!1},n={ariaRole:"option",tabIndex:-1,focus:!1},i=/Chrome\/[3-5]/.test(navigator.userAgent),o=i,s=i,r=document.createElement("div").style,a="transition"in r?"transition":"webkitTransition",h="transform"in r?"transform":"webkitTransform",l="webkitTransform"===h?"-webkit-transform":"transform",u="userSelect"in r?"userSelect":"webkitUserSelect";r[h]="translateZ(0)";var d=r[h]?"translateZ(0) ":"",c=r[h]?"translateZ(1px) ":"";r=null;var g=0,p=!1,f=function(){};function v(t,e){if("string"==typeof t&&(t=document.querySelector(t)),!t||!t.addEventListener)throw new Error("Please specify DOM node to attach to");if(!this||this===window)return new v(t,e);this.options=e=e||{},this.options.keepSwipingPercent=e.keepSwipingPercent||0,this.options.minimumSwipeVelocity=e.minimumSwipeVelocity||1,this.options.minimumSwipeTime=e.minimumSwipeTime||110,this.cancel=this.setState.bind(this,this.states.idle),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onSelection=this.onSelection.bind(this),this.onContainerFocus=this.onContainerFocus.bind(this),this.setState(this.states.idle),this.attach(t)}function m(t){var e=t.style[h];if(e)return{value:e,original:e};if(window.getComputedStyle){var n=window.getComputedStyle(t).getPropertyValue(l);if(n&&"none"!==n)return{value:n,original:""}}return{value:"",original:""}}function y(t,e){for(var n=0,i=0,o=0;o<e.length;o++)1===e[o].nodeType&&(i++,e[o]===t.node&&(n=i-1));return n}return v.prototype={container:null,options:{},state:null,target:null,usingTouch:!1,mouseHandlersAttached:!1,startPosition:null,latestPosition:null,previousPosition:null,canPreventScrolling:!1,states:{idle:function(){return this.removeMouseHandlers(),this.target&&(this.target.node.style.willChange="",this.target=null),this.usingTouch=!1,{allowTextSelection:!0}},undecided:function(){if(this.target.height=this.target.node.offsetHeight,this.target.node.style.willChange=l,this.target.node.style[a]="",this.dispatch(this.target.originalTarget,"beforewait"))var t=setTimeout(function(){var t=this.getAbsoluteMovement();this.canPreventScrolling&&t.x<15&&t.y<25&&this.dispatch(this.target.originalTarget,"beforereorder")&&this.setState(this.states.reorder)}.bind(this),300);else this.dispatch(this.target.originalTarget,"beforereorder")&&this.setState(this.states.reorder);return{leaveState:function(){clearTimeout(t)},onMove:function(){var t=this.getAbsoluteMovement();if(t.x>20&&t.y<Math.max(100,this.target.height)){if(this.dispatch(this.target.originalTarget,"beforeswipe",{directionX:t.directionX,directionY:t.directionY}))return this.setState(this.states.swipe),!1;this.setState(this.states.idle)}if(t.y>20&&this.setState(this.states.idle),t.x>1.2*t.y)return!1},onLeave:function(){this.setState(this.states.idle)},onEnd:function(){var t=this.dispatch(this.target.originalTarget,"tap");return this.setState(this.states.idle),t}}},swipe:function(){var t=!1,e=this.container,n=y(this.target,this.container.childNodes);function i(){e.classList.remove("slip-swiping-container")}return e.classList.add("slip-swiping-container"),this.target.height=this.target.node.offsetHeight,{leaveState:function(){t?this.animateSwipe(function(t){if(t.node.style[h]=t.baseTransform.original,t.node.style[a]="",this.dispatch(t.node,"afterswipe"))return i(),!0;this.animateToZero(void 0,t)}.bind(this)):this.animateToZero(i)},onMove:function(){var t=this.getTotalMovement();if(Math.abs(t.y)<this.target.height+20)return this.dispatch(this.target.node,"animateswipe",{x:t.x,originalIndex:n})&&(this.target.node.style[h]="translate("+t.x+"px,0) "+d+this.target.baseTransform.value),!1;this.dispatch(this.target.node,"cancelswipe"),this.setState(this.states.idle)},onLeave:function(){this.state.onEnd.call(this)},onEnd:function(){var e=this.getAbsoluteMovement(),i=e.x/e.time,o=100*Math.abs((this.startPosition.x-this.previousPosition.x)/this.container.clientWidth),s=i>this.options.minimumSwipeVelocity&&e.time>this.options.minimumSwipeTime||this.options.keepSwipingPercent&&o>this.options.keepSwipingPercent;return s?this.dispatch(this.target.node,"swipe",{direction:e.directionX,originalIndex:n})&&(t=!0):this.dispatch(this.target.node,"cancelswipe"),this.setState(this.states.idle),!s}}},reorder:function(){this.target.node.focus&&n.focus&&this.target.node.focus(),this.target.height=this.target.node.offsetHeight;for(var t,i=this.container.childNodes,o=y(this.target,i),r=this.target.node.offsetTop+this.target.height/2,g=[],p=0;p<i.length;p++)if(1==i[p].nodeType&&i[p]!==this.target.node){var f=i[p].offsetTop;i[p].style[a]=l+" 0.2s ease-in-out",g.push({node:i[p],baseTransform:m(i[p]),pos:f+(f<r?i[p].offsetHeight:0)-r})}function v(){this.updateScrolling(),t&&(clearTimeout(t),t=null);var e=this.getTotalMovement();this.target.node.style[h]="translate(0,"+e.y+"px) "+c+this.target.baseTransform.value;var n=this.target.height;return g.forEach(function(t){var i=0;t.pos<0&&e.y<0&&t.pos>e.y?i=n:t.pos>0&&e.y>0&&t.pos<e.y&&(i=-n),t.node.style[h]=i?"translate(0,"+i+"px) "+d+t.baseTransform.value:t.baseTransform.original}),!1}return this.target.node.classList.add("slip-reordering"),this.target.node.style.zIndex="99999",this.target.node.style[u]="none",s&&(this.container.style.webkitTransformStyle="preserve-3d"),v.call(this),{leaveState:function(){t&&clearTimeout(t),s&&(this.container.style.webkitTransformStyle=""),this.container.focus&&e.focus&&this.container.focus(),this.target.node.classList.remove("slip-reordering"),this.target.node.style[u]="",this.animateToZero(function(t){t.node.style.zIndex=""}),g.forEach(function(t){t.node.style[h]=t.baseTransform.original,t.node.style[a]=""})},onMove:v,onLeave:function(){t&&clearTimeout(t),t=setTimeout(function(){t=null,this.cancel()}.bind(this),700)},onEnd:function(){var t,e,n=this.getTotalMovement();if(n.y<0){for(t=0;t<g.length&&!(g[t].pos>n.y);t++);e=t}else{for(t=g.length-1;t>=0&&!(g[t].pos<n.y);t--);e=t+1}return this.dispatch(this.target.node,"reorder",{spliceIndex:e,originalIndex:o,insertBefore:g[e]?g[e].node:null}),this.setState(this.states.idle),!1}}}},attach:function(t){g++,this.container&&this.detach(),!p&&o&&(p=!0,document.body.addEventListener("touchstart",f,!1)),this.container=t,this.container.tabIndex=e.tabIndex,this.container.setAttribute("aria-role",e.ariaRole),this.setChildNodesAriaRoles(),this.container.addEventListener("focus",this.onContainerFocus,!1),this.otherNodes=[],document.addEventListener("selectionchange",this.onSelection,!1),this.container.addEventListener("touchcancel",this.cancel,!1),this.container.addEventListener("touchstart",this.onTouchStart,!1),this.container.addEventListener("touchmove",this.onTouchMove,!1),this.container.addEventListener("touchend",this.onTouchEnd,!1),this.container.addEventListener("mousedown",this.onMouseDown,!1)},detach:function(){this.cancel(),this.container.removeEventListener("mousedown",this.onMouseDown,!1),this.container.removeEventListener("touchend",this.onTouchEnd,!1),this.container.removeEventListener("touchmove",this.onTouchMove,!1),this.container.removeEventListener("touchstart",this.onTouchStart,!1),this.container.removeEventListener("touchcancel",this.cancel,!1),document.removeEventListener("selectionchange",this.onSelection,!1),this.container.removeAttribute("tabIndex"),this.container.removeAttribute("aria-role"),this.unSetChildNodesAriaRoles(),!--g&&p&&(p=!1,document.body.removeEventListener("touchstart",f,!1))},setState:function(t){if(this.state){if(this.state.ctor===t)return;this.state.leaveState&&this.state.leaveState.call(this)}var e=this.state,n=t.call(this);this.state===e&&(n.ctor=t,this.state=n)},findTargetNode:function(t){for(;t&&t.parentNode!==this.container;)t=t.parentNode;return t},onContainerFocus:function(t){this.setChildNodesAriaRoles()},setChildNodesAriaRoles:function(){for(var t=this.container.childNodes,e=0;e<t.length;e++)1==t[e].nodeType&&(t[e].setAttribute("aria-role",n.ariaRole),t[e].tabIndex=n.tabIndex)},unSetChildNodesAriaRoles:function(){for(var t=this.container.childNodes,e=0;e<t.length;e++)1==t[e].nodeType&&(t[e].removeAttribute("aria-role"),t[e].removeAttribute("tabIndex"))},onSelection:function(t){var e=t.target===document||this.findTargetNode(t),n=/(iPhone|iPad|iPod)/i.test(navigator.userAgent)&&!/(Android|Windows)/i.test(navigator.userAgent);e&&(n?this.setState(this.states.idle):this.state.allowTextSelection||t.preventDefault())},addMouseHandlers:function(){this.mouseHandlersAttached||(this.mouseHandlersAttached=!0,document.documentElement.addEventListener("mouseleave",this.onMouseLeave,!1),window.addEventListener("mousemove",this.onMouseMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),window.addEventListener("blur",this.cancel,!1))},removeMouseHandlers:function(){this.mouseHandlersAttached&&(this.mouseHandlersAttached=!1,document.documentElement.removeEventListener("mouseleave",this.onMouseLeave,!1),window.removeEventListener("mousemove",this.onMouseMove,!0),window.removeEventListener("mouseup",this.onMouseUp,!0),window.removeEventListener("blur",this.cancel,!1))},onMouseLeave:function(t){this.usingTouch||t.target!==document.documentElement&&t.relatedTarget!==document.documentElement||this.state.onLeave&&this.state.onLeave.call(this)},onMouseDown:function(t){!this.usingTouch&&0==t.button&&this.setTarget(t)&&(this.addMouseHandlers(),this.canPreventScrolling=!0,this.startAtPosition({x:t.clientX,y:t.clientY,time:t.timeStamp}))},onTouchStart:function(t){this.usingTouch=!0,this.canPreventScrolling=!0,t.touches.length>1?this.setState(this.states.idle):this.setTarget(t)&&this.startAtPosition({x:t.touches[0].clientX,y:t.touches[0].clientY,time:t.timeStamp})},setTarget:function(t){var e=this.findTargetNode(t.target);if(!e)return this.setState(this.states.idle),!1;for(var n=e.parentNode;n&&n!=document.body&&!(n.scrollHeight>n.clientHeight&&"visible"!=window.getComputedStyle(n)["overflow-y"]);)n=n.parentNode;return n=n||document.body,this.target={originalTarget:t.target,node:e,scrollContainer:n,origScrollTop:n.scrollTop,origScrollHeight:n.scrollHeight,baseTransform:m(e)},!0},startAtPosition:function(t){this.startPosition=this.previousPosition=this.latestPosition=t,this.setState(this.states.undecided)},updatePosition:function(t,e){null!=this.target&&(this.latestPosition=e,this.state.onMove&&!1===this.state.onMove.call(this)&&t.preventDefault(),this.latestPosition.time-this.previousPosition.time>100&&(this.previousPosition=this.latestPosition))},onMouseMove:function(t){this.updatePosition(t,{x:t.clientX,y:t.clientY,time:t.timeStamp})},onTouchMove:function(t){this.updatePosition(t,{x:t.touches[0].clientX,y:t.touches[0].clientY,time:t.timeStamp}),this.canPreventScrolling=!1},onMouseUp:function(t){this.usingTouch||0!==t.button||this.state.onEnd&&!1===this.state.onEnd.call(this)&&t.preventDefault()},onTouchEnd:function(t){t.touches.length>1?this.cancel():this.state.onEnd&&!1===this.state.onEnd.call(this)&&t.preventDefault()},getTotalMovement:function(){var t=this.target.scrollContainer.scrollTop-this.target.origScrollTop;return{x:this.latestPosition.x-this.startPosition.x,y:this.latestPosition.y-this.startPosition.y+t,time:this.latestPosition.time-this.startPosition.time}},getAbsoluteMovement:function(){var t=this.getTotalMovement();return{x:Math.abs(t.x),y:Math.abs(t.y),time:t.time,directionX:t.x<0?"left":"right",directionY:t.y<0?"up":"down"}},updateScrolling:function(){var t=0,e=this.target.scrollContainer,n=e.getBoundingClientRect(),i=this.target.node.getBoundingClientRect(),o=Math.min(n.bottom,window.innerHeight)-i.bottom,s=i.top-Math.max(n.top,0),r=this.target.origScrollHeight-Math.min(e.clientHeight,window.innerHeight);o<40?t=Math.min(40,40-o):s<40&&(t=Math.max(-40,s-40)),e.scrollTop=Math.max(0,Math.min(r,e.scrollTop+t))},dispatch:function(t,e,n){var i=document.createEvent("CustomEvent");return i&&i.initCustomEvent?i.initCustomEvent("slip:"+e,!0,!0,n):((i=document.createEvent("Event")).initEvent("slip:"+e,!0,!0),i.detail=n),t.dispatchEvent(i)},getSiblings:function(t){for(var e=[],n=t.node.nextSibling;n;)1==n.nodeType&&e.push({node:n,baseTransform:m(n)}),n=n.nextSibling;return e},animateToZero:function(t,e){(e=e||this.target).node.style[a]=l+" 0.1s ease-out",e.node.style[h]="translate(0,0) "+d+e.baseTransform.value,setTimeout(function(){e.node.style[a]="",e.node.style[h]=e.baseTransform.original,t&&t.call(this,e)}.bind(this),101)},animateSwipe:function(t){var e=this.target,n=this.getSiblings(e),i="translate(0,"+this.target.height+"px) "+d+" ";e.node.style[a]="all 0.1s linear",e.node.style[h]=" translate("+(this.getTotalMovement().x>0?"":"-")+"100%,0) "+d+e.baseTransform.value,setTimeout(function(){t.call(this,e)&&(n.forEach(function(t){t.node.style[a]="",t.node.style[h]=i+t.baseTransform.value}),setTimeout(function(){n.forEach(function(t){t.node.style[a]=l+" 0.1s ease-in-out",t.node.style[h]="translate(0,0) "+d+t.baseTransform.value}),setTimeout(function(){n.forEach(function(t){t.node.style[a]="",t.node.style[h]=t.baseTransform.original})},101)},1))}.bind(this),101)}},t.exports&&(t.exports=v),v}()});function n(t,e){for(var n=0;n<t.length;n++)e.call(t,t[n],n,t)}class i{constructor(){this.wrk=new Worker((window.ENV||{}).worker||"./worker.js"),this._message_handlers={results:()=>{},preloadResults:()=>{}},this.wrk.onmessage=this._handleMessage.bind(this)}generate(t){this.wrk.postMessage({type:"generate",params:t})}setHandlerForResults(t){this._message_handlers.results=t}_handleMessage(t){this._message_handlers[t.data.type](t.data)}setHandlerForPreloadResults(t){this._message_handlers.preloadResults=t}preloadFile(t){this.wrk.postMessage({type:"preload",file:t})}}var o,s=t(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={parseNegative:!1,parseUnbounded:!1},i=9007199254740991,o=-9007199254740991,s=function(){function t(e,i){function o(t){return"[object Array]"===Object.prototype.toString.call(t)}if(void 0===i&&(i=n),this.ranges=[],this.options={parseNegative:!!i.parseNegative,parseUnbounded:!!i.parseUnbounded},"string"==typeof e)this.parseString(e);else if("number"==typeof e)this.appendRange(e,e);else if(e instanceof t)this.ranges=e.getRanges(),void 0===arguments[1]&&(this.options={parseNegative:e.options.parseNegative,parseUnbounded:e.options.parseUnbounded});else if(o(e))for(var s=0,r=e;s<r.length;s++){var a=r[s];if(o(a)){if(2!==a.length)throw new TypeError("Invalid array initializer");this.appendRange(a[0],a[1])}else{if("number"!=typeof a)throw new TypeError("Invalid array initialzer");this.append(a)}}else if(void 0!==e)throw new TypeError("Invalid input")}return t.prototype.parseString=function(t){function e(t){var e=t.match(/^\(?(\-?\d+)/),n=parseInt(e[1],10);if(n<o||i<n)throw new RangeError("The number is too big or too small.");return n}var n=t.replace(/\s/g,"");if(n.length)for(var s,r=this.options.parseNegative?"(\\d+|\\(\\-?\\d+\\))":"(\\d+)",a=new RegExp("^"+r+"$"),h=new RegExp("^"+r+"?\\-"+r+"?$"),l=0,u=n.split(",");l<u.length;l++){var d=u[l];if(s=d.match(a)){var c=e(s[1]);this.appendRange(c,c)}else{if(!(s=d.match(h)))throw new SyntaxError("Invalid input");if(!this.options.parseUnbounded&&(void 0===s[1]||void 0===s[2]))throw new SyntaxError("Unexpected unbouded range notation");var g=void 0===s[1]?-1/0:e(s[1]),p=void 0===s[2]?1/0:e(s[2]);this.appendRange(g,p)}}},t.prototype.clone=function(){return new t(this)},t.prototype.append=function(e){if(void 0===e)throw new TypeError("Invalid input");if(e instanceof t){for(var n=0,i=e.ranges;n<i.length;n++){var o=i[n];this.appendRange(o[0],o[1])}return this}return this.append(new t(e,this.options))},t.prototype.appendRange=function(t,e){var n=[t,e];if(n[0]>n[1]&&(n=[n[1],n[0]]),n[0]===1/0&&n[1]===1/0||n[0]===-1/0&&n[1]===-1/0)throw new RangeError("Infinity can be used only within an unbounded range segment");var i=this.findOverlap(n);return this.ranges.splice(i.lo,i.count,i.union),this},t.prototype.subtract=function(e){if(void 0===e)throw new TypeError("Invalid input");if(e instanceof t){for(var n=0,i=e.ranges;n<i.length;n++){var o=i[n];this.subtractRange(o[0],o[1])}return this}return this.subtract(new t(e,this.options))},t.prototype.subtractRange=function(t,e){var n=[t,e];n[0]>n[1]&&(n=[n[1],n[0]]);var i=this.findOverlap(n);if(i.count>0){var o=[];this.ranges[i.lo][0]<n[0]&&o.push([this.ranges[i.lo][0],n[0]-1]),n[1]<this.ranges[i.lo+i.count-1][1]&&o.push([n[1]+1,this.ranges[i.lo+i.count-1][1]]),this.ranges.splice.apply(this.ranges,[i.lo,i.count].concat(o))}return this},t.prototype.intersect=function(e){if(void 0===e)throw new TypeError("Invalid input");if(e instanceof t){for(var n=[],i=0,o=0;o<this.ranges.length;o++)for(var s=this.ranges[o],r=i;r<e.ranges.length;r++){var a=e.ranges[r];if(s[0]<=a[1]&&s[1]>=a[0]){i=r;var h=Math.max(s[0],a[0]),l=Math.min(s[1],a[1]);n.push([h,l])}else if(s[1]<a[0])break}return this.ranges=n,this}return this.intersect(new t(e,this.options))},t.prototype.findOverlap=function(t){for(var e=this.ranges.length-1;e>=0;e--){var n=this.ranges[e],i=void 0;if(i=this.calcUnion(n,t)){for(var o=1,s=void 0;e-o>=0&&(s=this.calcUnion(i,this.ranges[e-o]));)i=s,o++;return{lo:e+1-o,count:o,union:i}}if(n[1]<t[0])return{lo:e+1,count:0,union:t}}return{lo:0,count:0,union:t}},t.prototype.calcUnion=function(t,e){return t[1]+1<e[0]||t[0]-1>e[1]?null:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]},t.prototype.getRanges=function(){for(var t=[],e=0,n=this.ranges;e<n.length;e++){var i=n[e];t.push([i[0],i[1]])}return t},t.prototype.has=function(e){if(void 0===e)throw new TypeError("Invalid input");if(e instanceof t){for(var n=this.ranges.length,i=0,o=e.ranges;i<o.length;i++){var s=o[i],r=void 0;for(r=0;r<n;r++){var a=this.ranges[r];if(s[0]>=a[0]&&s[1]<=a[1]&&s[1]>=a[0]&&s[1]<=a[1])break}if(r===n)return!1}return!0}return this.has(new t(e,this.options))},t.prototype.hasRange=function(e,n){return this.has(new t([[e,n]]))},t.prototype.segmentLength=function(){return this.ranges.length},t.prototype.length=function(){if(this.isUnbounded())return 1/0;for(var t=0,e=0,n=this.ranges;e<n.length;e++){var i=n[e];t+=i[1]-i[0]+1}return t},t.prototype.equals=function(e){if(void 0===e)throw new TypeError("Invalid input");if(e instanceof t){if(e===this)return!0;if(this.ranges.length!==e.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++)if(this.ranges[n][0]!==e.ranges[n][0]||this.ranges[n][1]!==e.ranges[n][1])return!1;return!0}return this.equals(new t(e,this.options))},t.prototype.isUnbounded=function(){return this.ranges.length>0&&(this.ranges[0][0]===-1/0||this.ranges[this.ranges.length-1][1]===1/0)},t.prototype.min=function(){if(0!==this.ranges.length)return this.ranges[0][0]},t.prototype.max=function(){if(0!==this.ranges.length)return this.ranges[this.ranges.length-1][1]},t.prototype.shift=function(){var t=this.min();if(t===-1/0)throw new RangeError("shift() was invoked on an unbounded MultiRange which contains -Infinity");return void 0!==t&&this.subtract(t),t},t.prototype.pop=function(){var t=this.max();if(t===1/0)throw new RangeError("pop() was invoked on an unbounded MultiRange which contains +Infinity");return void 0!==t&&this.subtract(t),t},t.prototype.toString=function(){function t(t){return t>=0?String(t):"("+t+")"}for(var e=[],n=0,i=this.ranges;n<i.length;n++){var o=i[n];o[0]===-1/0?o[1]===1/0?e.push("-"):e.push("-"+t(o[1])):o[1]===1/0?e.push(t(o[0])+"-"):o[0]==o[1]?e.push(t(o[0])):e.push(t(o[0])+"-"+t(o[1]))}return e.join(",")},t.prototype.toArray=function(){if(this.isUnbounded())throw new RangeError("You cannot build an array from an unbounded range");for(var t=new Array(this.length()),e=0,n=0,i=this.ranges;n<i.length;n++)for(var o=i[n],s=o[0];s<=o[1];s++)t[e++]=s;return t},t.prototype.getIterator=function(){var t=this;if(this.isUnbounded())throw new RangeError("Unbounded ranges cannot be iterated over");var e=0,n=this.ranges[e],i=n?n[0]:void 0;return{next:function(){if(!n||void 0===i)return{done:!0};var o=i;return++i>n[1]&&(n=t.ranges[++e],i=n?n[0]:void 0),{value:o}}}},t}();e.MultiRange=s,e.default=s,"function"==typeof Symbol&&"iterator"in Symbol&&(s.prototype[Symbol.iterator]=s.prototype.getIterator),e.multirange=function(t,e){return new s(t,e)}}),r=(o=s)&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;s.MultiRange,s.multirange;function a(t){if(t.target.classList.contains("val-pages"))try{const e=new r(t.target.value,{parseUnbounded:!0});if(isFinite(e.max())&&e.max()>t.target.maxPages)return void t.target.setCustomValidity("Page range out of bounds, limit is "+t.target.maxPages);t.target.reportValidity()}catch(e){t.target.setCustomValidity("Page range not recognized. Please use one or more ranges, such as 1-3,5,2-")}}function h(t,e){const i=document.getElementById("pages-list"),o=document.getElementById("pageset-template");n(t,t=>{let n=document.importNode(o.content,!0),s="id-"+Math.random().toString(36).substr(2,9);n.querySelector(".list-group-item").classList.add("bg-secondary"),n.querySelector(".val-name").textContent=t.name,n.querySelector(".val-info").textContent="(loading)",n.querySelector(".val-pages").value="",n.querySelector(".list-group-item").remix={file:t},n.querySelector("label").setAttribute("for",s),n.querySelector(".val-pages").setAttribute("id",s),i.appendChild(n),e.preloadFile(t)})}function l(t){n(document.getElementById("pages-list").querySelectorAll(".list-group-item"),e=>{if(e.remix.file.name===t.filename)if(e.classList.remove("bg-secondary"),t.success){const n=1===t.maxPages?"1 page":t.maxPages+" pages";e.querySelector(".val-info").textContent="("+n+")";let i=e.querySelector("input");i.removeAttribute("disabled"),i.maxPages=t.maxPages,i.value="1-"+t.maxPages,e.classList.add("remix-ok")}else e.querySelector(".val-info").textContent="(error during loading: "+t.error+")",e.classList.add("bg-warning")})}function u(t){const e=new Blob([t.buffer],{type:"application/pdf"}),n=window.URL.createObjectURL(e),i=document.createElement("a");i.style.display="none",i.href=n,i.setAttribute("download","remixed.pdf"),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),document.body.removeChild(i)}window.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("pages-list");new e(t),t.addEventListener("slip:reorder",t=>{const{detail:{insertBefore:e},target:n}=t;n.parentNode.insertBefore(n,e)}),t.addEventListener("slip:swipe",t=>{t.target.parentNode.removeChild(t.target)})}),window.addEventListener("DOMContentLoaded",function(){const t=new i;t.setHandlerForResults(u),t.setHandlerForPreloadResults(l),document.getElementById("filePickerTriggerLink").addEventListener("click",t=>{t.stopPropagation(),t.preventDefault(),e.click()});const e=document.getElementById("filePicker");var o,s,r,d;e.addEventListener("change",e=>{h(e.target.files,t)}),document.getElementById("generate").addEventListener("click",()=>(function(t){const e=document.querySelectorAll("#pages-list .list-group-item.remix-ok");let i=[];n(e,t=>{i.push({file:t.remix.file,pages:t.querySelector(".val-pages").value})}),t.generate({pages:i})})(t)),document.addEventListener("input",(o=a,s=250,function(){var t=this,e=arguments,n=r&&!d;clearTimeout(d),d=setTimeout(function(){d=null,r||o.apply(t,e)},s),n&&o.apply(t,e)}));const c=document.querySelector(".dnd"),g=document.querySelector(".non-dnd"),p=t=>{t.preventDefault(),t.stopPropagation()};["dragover","dragenter","dragleave","dragend","drop"].forEach(t=>document.body.addEventListener(t,p));var f=0;const v=()=>{0==--f&&(g.classList.remove("d-none"),c.classList.add("d-none"))};document.body.addEventListener("dragenter",()=>{f++,c.classList.remove("d-none"),g.classList.add("d-none")}),document.body.addEventListener("dragleave",v),document.body.addEventListener("drop",e=>{v(),e.dataTransfer.items?n(e.dataTransfer.items,e=>{if("file"===e.kind){let n=e.getAsFile();"application/pdf"===n.type&&h([n],t)}}):n(e.dataTransfer.files,e=>{"application/pdf"===e.type&&h([e],t)})})}),"serviceWorker"in navigator&&window.ENV&&navigator.serviceWorker.register(window.ENV.sw)}();
